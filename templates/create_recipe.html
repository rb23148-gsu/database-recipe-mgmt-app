{% extends 'base.html'%}

{% block head %}

{% endblock %}

{% block body %}

<form action="/create_recipe" method="post">

    <h1>Create Recipe</h1>

    <form action="/create_recipe" method="post">

        <!-- Recipe details -->
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required><br><br>

        <!-- Get all the categories with a Jinja loop -->
        <label for="category">Category:</label>
        <select id="category" name="category_id" required>
            {% for category in categories %}
                <option value="{{ category.CategoryID }}">{{ category.Name }}</option>
            {% endfor %}
        </select><br><br>

        <label for="description">Description:</label><br>
        <textarea id="description" name="description" rows="4" cols="50" required></textarea><br><br>

        <label for="instructions">Instructions:</label><br>
        <textarea id="instructions" name="instructions" rows="4" cols="50" required></textarea><br><br>

        
        <!-- Ingredients -->
        <h2>Ingredients</h2>
        <div id="ingredient-fields">
            <div>
                <label for="quantity">Quantity:</label>
                <input type="text" id="quantity" name="quantity" required>

                <label for="unit">Unit:</label>
                <input type="text" id="unit" name="unit" required>

                <label for="ingredient">Ingredient:</label>
                <input type="text" id="ingredient" name="ingredient" required>
            
            </div>

        <!-- Use some JS to add extra ingredient fields. -->    
        </div>
        <button type="button" id="add-ingredient">Add Ingredient</button><br><br>

        <!-- Create Recipe button to submit the data. -->
        <button type="submit">Create Recipe</button>
    </form>

    <script>
        // Enable creating new ingredient fields with a button press
        document.getElementById('add-ingredient').addEventListener('click', function() {

            var ingredientFields = document.getElementById('ingredient-fields');
            var div = document.createElement('div');

            div.innerHTML = '<label for="quantity">Quantity:</label>' +
                            '<input type="text" id="quantity" name="quantity" required>' +
                            '<label for="unit">Unit:</label>' +
                            '<input type="text" id="unit" name="unit" required>' +
                            '<label for="ingredient">Ingredient:</label>' +
                            '<input type="text" id="ingredient" name="ingredient" required>';

            ingredientFields.appendChild(div);
        });
    </script>


{% endblock %} 